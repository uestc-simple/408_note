# IO系统
## I/O系统基本概念
### 输入/输出系统
- 外部设备:包括输入/输出设备以及通过输入/输出接口才能访问的外存储
- 设备接口:在各个外设与主机之间传输数据时进行各种协调工作的逻辑部件
- 输入设备:用于向计算机系统输入命令和文本、数据等信息的部件
- 输出设备:用于将计算机系统中的信息输出到计算机外部进行显示的部件
- 外存设备:除计算机内存及CPU缓存等外的存储器
- I/O系统
  - I/O软件:驱动程序、用户程序、管理程序、升级补丁.通常采用/O指令和通道指令实现CPU与I/O设备的交互
  - I/O硬件:包括外部设备、设备控制器和接口、I/O总线等
### I/O控制方式
- 程序查询方式:CPU通过程序不断查询/O设备是否已做好准备,从而控制I/O设备与主机交换信息
- 程序中断方式:只在I/O设备准备就绪并向CPU发出中断请求时才予以响应
- DMA方式:主存和I/O设备之间有一条直接数据通络,当主存和I/O设备交换信息时无须调用中断服务程序
- 通道方式:在系统中设有通道控制部件,每个通道挂接若干外设,主机在执行/O指令时,只需要启动有关通道,通道执行通道程序,完成I/O备

----------------------
## 外部设备
### 输入设备
- 键盘
- 鼠标
### 输出设备
- 显示器
  - 显示器件分类
    1. 阴极射线管(CRT)显示器
    2. 液晶显示器(LCD)
    3. 发光二极管(LED)显示器
- 主要参数
  - 屏幕大小:对角线长度分辨率:所能显示的像素个数,宽与高的乘积
  - 灰度级:黑白显示器中所显示的像素点的亮暗差别,彩色显示器中颜色的不同灰度级越高图形越清晰越逼真
  - 刷新:光点只能保持极短的时间就会消失,必须在其消失前重新扫描一遍
  - 刷新频率:单位时间内扫描整个屏幕内容的次数,刷新频率大于30hz时人眼无法分辨出刷新,通常显示器的刷新频率为60~120HZ
  - 显示存储器((VRAM):也称为刷新存储器,将一帧的图像存储在刷新存储器中,从而提高刷新图像的信号
- 打印机
  - 针式打印机
  - 喷墨式打印机
  - 激光打印机
- 磁表面存储器
  - 磁盘存储器
    - 组成
      - 存储区域
        - 磁头:用于读取/写入盘片上的记录面信息,一个记录面对应一个磁头
        - 柱面数:表示硬盘每个盘片上有多少磁道
        - 扇片数:表示每条磁道上有多少个扇区
    - 硬盘存储器
      - 磁盘驱动器:核心部件是磁头组件和盘片组件
      - 磁盘控制器:硬盘存储器和主机的接口,IDE SCSI SATA等
    - 磁记录原理
      - 原理:磁头和磁性记录介质相对运动,通过电转磁完成读/写操作
      - 编码方法:按照某种方案把一连串二进制信息变换成存储介质磁层中一个磁化翻转状态的序列,并使读/写控制电路容易、可靠的实现变换
      - 磁记录方式:通常采用调频制(FM)和改进型调频制(MFM)的记录方式
      - 磁盘的性能指标
        - 磁盘的容量:存储字节的数量
        - 格式化容量:按照某种特定记录方式可以记录信息的总量
        - 非格式化容量:可以利用的磁化单元总数
        - 记录密度: 盘片单位面积上记录得二进制信息量
          - 道密度:沿磁盘半径方向单位长度上的磁道数
          - 位密度:磁道单位长度上能记录得二进制代码位数
          - 面密度:位密度和道密度的乘积
        - 平均存取时间:寻道时间(磁头移动到目的磁道的时间)+旋转延迟时间(磁头定位到所在扇区的时间)+传输时间(传输数据所花费的时间)
        - 数据传输率:磁盘存储器在单位时间内向主机传送数据的字节数$D_r=rN$
        - 磁盘地址硬盘
        - 工作过程
            1. 寻址、读盘、写盘
            2. 第一步是取控制字
            3. 第二步是执行控制字
            4. 读写操作是串行的,不能既读又写
  - 磁盘阵列
  - 光盘存储器
  - 固态硬盘
--------------------------
## I/O接口
### I/O接口的功能
- 实现主机和外设之间的通信联络控制.(时序配合问题,协调相互速度问题)保证计算机系统更能够统一协调的工作
- 进行地址译码和设备选择
- 实现数据的缓冲相处CPU和外设之间的速度差异
- 信号格式转换:实现消除主机与外设之间的电平数据格式等差异
### I/O接口的基本结构
- 内部接口  
  - 内部接口与系统总线相连(实质是与内存、CPU相连).数据传输方式只能是并行传输
- 外部接口
  - 外部接口通过接口电缆和外设相连.外部接口可能是串行结构所以I/O接口要有串/并转换C功能
### I/O接口类型  
- 数据传输方式
  - 并行接口:一个字节或者一个字的所有位同事传送
  - 串行接口:一位一位传输
- 控制方式分类
  - 程序查询接口
  - 中断接口
  - DMA接口
- 按照功能分类
### I/O端口及其编址
- 统一编址
  - 又称存储器映射方式,将IO端口当做存储器单元进行地址分配
    - 优点: 不需要设置专门输入输岀指令,CP∪访问存储器更灵活,端口编址空间较大
    - 缺点：端口占用存储器地址数据输入输岀的时候,执行速度较慢
- 独立编制
  - 又称I/O映射方式,I/O端口地址与存储器地址无关
    - 优点:程序编制清晰便于理解
    - 缺点:需要设置专门的输入/输岀指令访存增加了控制的复杂性
------------------------
## I/O方式
### 程序查询方式
- 原理:信息交换完全交给主机执行程序实现,主杋对设备的状态进行询问,然后根据结果决定下一步是传送数据还是等待
  - 优点:设计简单且设备量小
  - 缺点:CPU需要花费大量时间进行查询和等待一段时间内只能和一台外设交互信息效率低￠P∪存在原地踏步现象
### 程序中断方式
- 中断的基本概念
- 工作流程
  - 中断请求
    - 内/外中断
      - 内中断:内中断主要是指在处理器和内存内部产生的中断,包括程序运算引起的各种错误,如地址非法、校验错等
      - 外中断:外中断是指来自处理器和内存以外的部件引起的中断,包括IO设备发出的I/O中断等
    - 硬件中断与软件中断
      - 硬件中断:通过外部的硬件产生的中断,硬件中断属于外中断
      - 软件中断:通过某条指令产生的中断,这种中断是可以编程实现的,软件中断是内中断
    - 非屏蔽与可屏蔽中断
      - 非屏蔽中断非屏蔽中断是一种硬件中断,不受中断标志位I的影响,即使在关中断(IF=0)的情况下也会被响应.
      - 可屏蔽中断:可屏蔽中断也是一种硬件中断,受中断标志位IF的影响,在关中断情况下不接受中断请求
  - 中断判优
    - 通过中断判优逻辑确定响应哪个中断源的请求
    - 硬件实现:硬件实现是通过硬件排队器实现的,它既可以设置在CPU中,又可以分散在各个中断源中
    - 软件实现:软件实现是通过查询程序实现的
  - 中断隐指令
    - CPU响应中断后,经过某些操作,转去执行中断服务程序
  - 中断向量
    - 中断服务程序的入口地址该方法叫做中断向量法
  - 中断处理过程
- 多重中断和中断屏蔽技术
- DMA方式
- DMA方式与中断方式的区别
