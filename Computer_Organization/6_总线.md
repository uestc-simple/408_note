# 总线
-------
## 总线概述

### 总线基本概念
1. 总线的定义
	- 概念
		- 一组能为多个部件分时共享的公共信息传送线路
	- 特点
		- 分时
			- 同一时刻只允许一个部件向总线发送信息
		- 共享
			- 总线上可以挂接多个部件，各个部件之间互相交换的信息都可以通过这组线路分时共享
2. 总线设备
	主设备、从设备
3. 总线特性
	- 机械特性：尺寸、形状
	- 电气特性： 传输方向、有效电平范围
	- 功能特性：每根线的功能
	- 时间特性：信号和时序的关系

### 总线分类
1. 片内总线
	- CPU芯片内部寄存器之间、寄存器与ALU之间的公共连接线

2. 系统总线
	- 计算机系统内各功能部件（CPU、主存、I/O接口）之间相互连接的总线
	- 分类
		1. **数据总线**
			传输各功能部件之间的数据信息，双向传输总线，位数与机器字长、存储字长有关
		2. **地址总线**
			用来指出数据总线上的源数据或目的数据所在的主存单元或I/O端口的地址，单向传输总线，位数与主存地址空间大小有关
		3. **控制总线**
			传输控制信息，包括CPU送出的控制命令和主存（或外设）返回CPU的反馈信号

3. 通信总线（外部总线）
	计算机系统之间或计算机系统与其他系统之间传送信息的总线

### 总线系统结构
1. 单总线结构
	- CUP、主存、I/O设备都挂在一组总线上
2. 双总线结构
	- 主存总线+I/O总线；二者通过通道连接
3. 三总结结构
	- 主存总线+I/O总线+DMA总线
### 总线性能指标
1. 总线的传输周期（总线周期）
	- 一次总线操作所需的时间(包括申请阶段、寻址阶段、传输阶段和结束阶段)，通常由若干个总线时钟周期构成。
1. 总线时钟周期
	- 即机器的时钟周期。计算机有一个统一的时钟，以控制整个计算机的各个部件，总线也要受此时钟的控制。
1. 总线的工作频率
	- 总线上各种操作的频率，为总线周期的倒数。实际上指一秒内传送几次数据。
1. 总线的时钟频率
	- 即机器的时钟频率，为时钟周期的倒数。实际上指一秒内有多少个时钟周期。
1. 总线宽度
	- 又称为总线位宽，它是总线上同时能够传输的数据位数，通常是指数据总线的根数，如32根称为32位(bt)总线。
1. 总线带宽
	- 可理解为总线的数据传输率，即单位时间内总线上可传输数据的位数，通常用每秒钟传送信息的字节数来衡量，单位可用字节/秒(B/s)表示。
7. 总线复用
	- 总线复用是指一种信号线在不同的时间传输不同的信息。可以使用较少的线传输更多的信息，从而节省了空间和
成本。
8. 信号线数
	- 地址总线、数据总线和控制总线3种总线数的总和称为信号线数。


------
## 总线仲裁
### 集中总裁
1. 链式查询
	1. 从靠近总线控制器的设备开始查询
	- 优点
		- 优先级固定、控制器使用少（3根）
	- 缺点
		- 优先级不能变、对故障敏感
2. 计数器定时查询
	1. 根据定时器可以循环查找（也可以固定查找）
	- 优点
		- 优先级相等，计数器初值可以程序设置
	- 缺点
		- 增加控制线数$⌈log_2n⌉+2$ （2：BR、BS）
3. 独立请求
	1. 各个部件经各自总线请求总线部件控制器
	- 优点
		- 响应速度快、优先级控制灵活
	- 缺点
		- 控制线多$2n+1$
### 分布式总裁
- 特点：
	- 不需要中央仲裁器，每个潜在的主模块都有自己的仲裁器和仲裁号，多个仲裁器竞争使用总线。
- 步骤
		当设备有总线请求时，它们就把各自唯一的仲裁号发送到共享的仲裁总线上；
		每个仲裁器将从仲裁总线上得到的仲裁号与自己的仲裁号进行比较；
		如果仲裁总线上的号优先级高，则它的总线请求不予响应，并撤销它的仲裁号；
		最后，获胜者的仲裁号保留在仲裁总线上。

---
## 总线操作与定时
### 总线传输的4个阶段
### 同步定时方法
### 异步定时方法

---
## 总线标准
### 常见总线标准
