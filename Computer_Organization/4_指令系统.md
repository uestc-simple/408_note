# 指令系统

指令是指计算机执行某种操作的命令
## 指令格式
### 指令基本格式

指令：操作码字段+地址码字段

- 零地址指令
  - 不需要操作数的指令：空操作、中断、停机
  - 或操作数隐含在栈顶和次栈顶
- 一地址指令
- 二地址指令
- 三地址指令
- 四地址指令   

### 扩展操作码
动态将地址码扩展为操作码
- 前n位全为1进行扩展

扩展操作码设计要求

- 短码不能是长码前缀
- 各指令操作码不能相同

### 操作类型
- 数据传输
- 算数逻辑运算
- 移位操作
- 转移操作
  - 非条件转移（JUMP）、条件转移（BRENCH）、调用（CLLK）、返回（RET）、陷阱（TRAP）、循环
- 输入输出操作
------------
## 指令寻址方式
### 指令寻址和数据寻址
- 指令寻址
  - 顺序寻址
    - (PC)+1 $\rightarrow$ PC
  - 跳跃寻址
    - 由本条指令给出下一条指令地址
- 数据寻址
  - 操作码+寻址特征+形式地址A
### 常见数据寻址方式
1. 隐含寻址
     - 不明显给出操作数的地址，而是在指令中隐含操作数的地址
2. 立即寻址
     - 形式地址A就是操作数本身
     - 访存1次 = 取指令 1次+执行指令 0次
3. 直接寻址
    - 形式地址A是操作数的真实地址EA； $EA=A$
    - 访存2次 = 取指令 1次+执行指令 1次
4. 间接寻址
     - 形式地址A是操作数有效地址的储存单元的地址；$EA=(A)$
     - 访存3次 = 取指令 1次+执行指令 2次
5. 寄存器寻址
     - 在指令字中直接给出操作数所在的寄存器编号；$EA = R_i$ 操作数在$R_i$所指的寄存器中
     - 访存1次 = 取指令 1次+执行指令 0次
6. 寄存器间接寻址
     - 寄存器$R_i$中给出操作数所在主存单元的地址；$EA=(R_i)$
    - 访存3次 = 取指令 1次+执行指令 2次
7. 基址寻址
     - 将CPU中基址寄存器$(BR)$的内容加上指令格式中的形式地址A,而形成操作数的有效地址,即$EA=(BR)+A$.
8. 变址寻址
     - 有效地址$EA$等于指令字中的形式地址A与变址寄存器X的内容相加之和,即$EA=(X)+A$, 其中$X$为变址寄存器(专用),也可用通用寄存器作为变址寄存器.
9. 相对寻址
     - 把程序计数器$PC$的内容加上指令格式中的形式地址A而形成操作数的有效地址,即$EA=(PC)+A$,其中A是相对于当前指令地址的位移量,可正可负,补码表示.
10. 堆栈寻址
      - 操作数存放在堆栈中,隐含使用堆栈指针(SP)作为操作数地址

-----------------

## CISC和RISC
> CISC: Complex Instruction Set Computer 

> RISC: Reduced Instruction Set Computer

- 精简指令计算机系统
  1. RISK必然采用流水线系统
  2. RISK只有Load/Store
- 复杂指令计算机系统
